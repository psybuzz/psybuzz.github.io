<html>
	<head>
		<script src="http://code.jquery.com/jquery.min.js"></script>
		<style>
			body{
				margin: 0;
				overflow: hidden;
			}
			a{
				text-decoration: none;
				color: black;
				font-size: 57px;
			}
			div{
				z-index: 2013;
				margin: 0 auto;
				position: fixed;
				width: 100%;
				text-align: center;
				top: 47%;
				font-family: Helvetica;
			}
		</style>
	</head>

	<body id="brandy">
		<div id="nameplate"><a href="mailto:psybuzz@gmail.com">contact me.</a></div>

		<script>
			var noodles = [];

			var inception = function(mark)
			{
				var count = 0;
				var a = Math.random();
				console.log(a);

				modulo = new Array();
				var noori;

				//vertical // horizontal
				if (a < 0.5)
				{
					noori = document.createElement('div');
					$(noori).css('background-color','rgb('+Math.floor(Math.random()*255)+','+Math.floor(Math.random()*255)+','+Math.floor(Math.random()*255)+')');
					$(noori).css('position','absolute');
					$(noori).css('width', window.innerWidth);
					$(noori).css('height',Math.floor(Math.random()*window.innerHeight));
					$(noori).attr('id', 'd'+levels);

					//top or bottom / left or right
					if (Math.random() > 0.5)
						$(noori).css('top', 0);
					else
						$(noori).css('bottom', 0);

					//(Math.random() > 0.5)? $(noori).css('left',Math.floor(Math.random()*window.innerWidth)) : $(noori).css('right',Math.floor(Math.random()*window.innerWidth));
				} else {
					noori = document.createElement('div');
					$(noori).css('background-color','rgb('+Math.floor(Math.random()*255)+','+Math.floor(Math.random()*255)+','+Math.floor(Math.random()*255)+')');
					$(noori).css('position','absolute');
					$(noori).css('width',Math.floor(Math.random()*window.innerWidth));
					$(noori).css('height', window.innerHeight);
					$(noori).attr('id', 'd'+levels);

					
					//top or bottom / left or right
					//(Math.random() > 0.5)? $(noori).css('top',Math.floor(Math.random()*window.innerWidth)) : $(noori).css('bottom',Math.floor(Math.random()*window.innerWidth));

					if (Math.random() > 0.5)
						$(noori).css('left', 0);
					else
						$(noori).css('right', 0);
				}

				//add noori to the mark
				// $('#'+mark).prepend(noori);
				$('#nameplate', '#'+mark).before(noori);
				noodles.push(noori);
				console.log("added new element to: " + mark);
				levels++;

				//inception
				var dream;
				var depth = Math.floor(Math.random()*$('#'+mark).children.length);
				if (Math.random() > lower)
				{
					console.log(mark);
					inception(mark);
				}
				for (var i=0; i<$('#'+mark).children().length; i++)
				{
					child = $('#'+mark).children()[i];
					if (Math.random() > upper && !$(child).is("script"))
					{
						console.log("mark: " + mark + " has child: : " + $(child).attr('id'));
						inception($(child).attr('id'));
					}
				}
			}

			var levels = 0;
			var lower = 0.5;
			var upper = 0.9;


			inception('brandy');
			
			//activate all noodles
			var randomness = 100;
			var chaos = 10;
			var decay = 0.95;
			$(document).keyup(function(e){
				if (e.keyCode == 32){
					shift();
				}
			});
			//auto-shift
			var a = setInterval(shift, 3000);


			function shift(){
				$.each(noodles, function(i, item){
					var speed = Math.random()*300+500;
					randomness += chaos;
					chaos *= decay;

					if ($(item).css('top') != 'auto'){
						$(item).animate({ top: '+='+(Math.random()*randomness-(randomness/2)) }, speed);
					}
					if ($(item).css('bottom') != 'auto'){
						$(item).animate({ bottom: '+='+(Math.random()*randomness-(randomness/2)) }, speed);	
					}
					if ($(item).css('left') != 'auto'){
						$(item).animate({ left: '+='+(Math.random()*randomness-(randomness/2)) }, speed);
					}
					if ($(item).css('right') != 'auto'){
						$(item).animate({ right: '+='+(Math.random()*randomness-(randomness/2)) }, speed);
					}
					$(item).animate({
						opacity: Math.random()*0.5+0.5
					});
				});
			}

			
		</script>
	</body>
</html>